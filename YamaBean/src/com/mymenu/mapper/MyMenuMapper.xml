<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mymenu.mapper.MyMenuMapper">

	<select id="allListMenu" resultMap="menuAllResult">
		select * from menus order by menu_num desc
	</select>

	<resultMap type="com.menu.dto.MenuEntity" id="menuAllResult">
		<id property="menu_num" />
		<result property="m_group" column="m_group" />
		<result property="m_category" column="m_category" />
		<result property="m_name" column="m_name" />
		<result property="image" column="image" />
		<result property="content" column="content" />
		<result property="price" column="price" />
	</resultMap>


	<insert id="addMyMenu" parameterType="com.mymenu.dto.MyMenuDomain">
		<selectKey keyProperty="mymenu_num" resultType="int" order="BEFORE">
			select mymenus_seq.nextval from dual
		</selectKey>
		insert into mymenus(mymenu_num, member_id, mymenu_name, menu_num,
		my_optionSize, mymenu_price, my_optionAmount, my_optionShot, my_optionWhip) values(#{mymenu_num}, #{member_id}, #{mymenu_name}, #{menu_num}, #{my_optionSize}, #{mymenu_price}, #{my_optionAmount}, #{my_optionShot}, #{my_optionWhip})
	</insert>


	<select id="viewMyMenuList" resultMap="mymenuAllResult">
		select mymenu_num, member_id, mymenu_name, menu_num, my_optionSize, mymenu_price, my_optionAmount, my_optionShot, my_optionWhip, to_char(sub_day, 'yyyy-MM-dd') as s_day from mymenus order by mymenu_num desc
	</select>
	
	<resultMap type="com.mymenu.dto.MyMenuDomain" id="mymenuAllResult">
		<id property="mymenu_num" />
		<result property="member_id" column="member_id" />
		<result property="mymenu_name" column="mymenu_name" />
		<result property="menu_num" column="menu_num" />
		<result property="my_optionSize" column="my_optionSize" />
		<result property="sub_day" column="s_day" />
		<result property="mymenu_price" column="mymenu_price" />
		<result property="my_optionAmount" column="my_optionAmount" />
		<result property="my_optionShot" column="my_optionShot" />
		<result property="my_optionWhip" column="my_optionWhip" />
	</resultMap>


	<!-- public int removeMyMenu(int mymenu_num) ; //mymenu 삭제 public List<MymenuDomain> 
		viewMyMenuList(); //mymenu 리스트 public int replaceMyMenu(MymenuDomain mymenuDomain); 
		//mymenu 수정 public MymenuDomain detailViewMyMenu(int mymenu_num, MymenuDomain 
		mymenuDomain); //mymenu 상세보기 -->


</mapper>
	